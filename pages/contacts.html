<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Контакты — Доступная форма</title>
    <link rel="stylesheet" href="../styles/contacts.css">
</head>

<body>
    <a class="skip-link" href="#main">Пропустить навигацию</a>

    <header class="site-header" role="banner">
        <div class="container">
            <nav class="navbar" aria-label="Основная навигация">
                <div class="navbar__container">
                    <a href="index_dop.html" class="navbar__logo">PinqWest</a>

                    <button class="navbar__toggle" id="navToggle" 
                            type="button" aria-label="Открыть меню"
                            aria-expanded="false" aria-controls="navMenu">
                        <span></span><span></span><span></span>
                    </button>

                    <ul class="navbar__menu" id="navMenu">
                        <li><a href="index_dop.html">Главная</a></li>
                        <li><a href="projects.html">Проекты</a></li>
                        <li><a href="diary.html">Дневник</a></li>
                        <li><a href="../pages/contacts.html" class="active">Контакты</a></li>
                        <li><a href="../pages/izo.html">Изображение</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <main id="main" class="container" role="main">
        <h1 class="visually-hidden">Контактная форма</h1>
        <h2>Свяжитесь с нами</h2>

        <p class="lead">Заполните форму ниже — все поля, помеченные <span class="required-indicator">*</span>, обязательны.</p>

        <div id="form-status" aria-live="polite" class="visually-hidden"></div>

        <form id="contact-form" method="post" novalidate aria-describedby="form-help">
            <p id="form-help" class="visually-hidden">Форма обратной связи. После отправки появится статус.</p>

            <fieldset>
                <legend>Контактная информация</legend>

                <div class="form-row">
                    <label for="name">Имя <span class="required-indicator" aria-hidden="true">*</span></label>
                    <input type="text" id="name" name="name" required 
                           aria-describedby="name-desc name-error">
                    <div id="name-desc" class="visually-hidden">Введите ваше полное имя.</div>
                    <div id="name-error" class="error-text"></div>
                </div>

                <div class="form-row">
                    <label for="email">Электронная почта <span class="required-indicator" aria-hidden="true">*</span></label>
                    <input type="email" id="email" name="email" required
                           aria-describedby="email-desc email-error">
                    <div id="email-desc" class="visually-hidden">Формат: name@example.com</div>
                    <div id="email-error" class="error-text"></div>
                </div>

                <div class="form-row">
                    <label for="phone">Телефон</label>
                    <input type="tel" id="phone" name="phone"
                           aria-describedby="phone-desc phone-error">
                    <div id="phone-desc" class="visually-hidden">Формат: +7 912 345-67-89</div>
                    <div id="phone-error" class="error-text"></div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Сообщение</legend>

                <div class="form-row">
                    <label for="subject">Тема <span class="required-indicator" aria-hidden="true">*</span></label>
                    <input type="text" id="subject" name="subject" required
                           aria-describedby="subject-error">
                    <div id="subject-error" class="error-text"></div>
                </div>

                <div class="form-row">
                    <label for="message">Сообщение <span class="required-indicator" aria-hidden="true">*</span></label>
                    <textarea id="message" name="message" rows="6" required
                              aria-describedby="message-desc message-error"></textarea>
                    <div id="message-desc" class="visually-hidden">До 2000 символов.</div>
                    <div id="message-error" class="error-text"></div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Дополнительно</legend>

                <div class="form-row checkbox-row">
                    <input type="checkbox" id="subscribe" name="subscribe">
                    <label for="subscribe">Получать новости</label>
                </div>

                <fieldset>
                    <legend>Удобный способ обратной связи</legend>

                    <div class="form-row radio-row">
                        <input type="radio" id="contact-email" name="contact_method" value="email" checked>
                        <label for="contact-email">Email</label>
                    </div>

                    <div class="form-row radio-row">
                        <input type="radio" id="contact-phone" name="contact_method" value="phone">
                        <label for="contact-phone">Телефон</label>
                    </div>
                </fieldset>

            </fieldset>

            <div class="form-actions">
                <button type="submit" id="submit-btn">Отправить</button>
                <button type="reset" id="reset-btn">Очистить</button>
            </div>
        </form>
    </main>

    <footer class="site-footer" role="contentinfo">
        <div class="container">
            <p>© 2025 Компания «Пример»</p>
        </div>
    </footer>

    <script>
        // Управление aria-expanded для бургера
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');

        navToggle.addEventListener('click', () => {
            const expanded = navToggle.getAttribute('aria-expanded') === 'true';
            navToggle.setAttribute('aria-expanded', !expanded);
            navMenu.classList.toggle('open');
        });

        // Валидация
        (function () {
            const form = document.getElementById('contact-form');
            const status = document.getElementById('form-status');

            function showError(input, message) {
                const err = document.getElementById(input.id + '-error');
                input.setAttribute('aria-invalid', 'true');
                err.textContent = message;
            }

            function clearError(input) {
                const err = document.getElementById(input.id + '-error');
                input.removeAttribute('aria-invalid');
                err.textContent = '';
            }

            function validateField(input) {
                clearError(input);
                if (input.required && !input.value.trim()) {
                    showError(input, 'Это поле обязательно.');
                    return false;
                }
                if (input.type === 'email' && input.value) {
                    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!re.test(input.value)) {
                        showError(input, 'Введите корректный email.');
                        return false;
                    }
                }
                return true;
            }

            Array.from(form.querySelectorAll('input, textarea')).forEach(el => {
                el.addEventListener('blur', () => validateField(el));
                el.addEventListener('input', () => clearError(el));
            });

            form.addEventListener('submit', function (e) {
                e.preventDefault();
                let valid = true;
                Array.from(form.querySelectorAll('input, textarea')).forEach(el => {
                    if (!validateField(el)) valid = false;
                });

                status.classList.remove('visually-hidden');

                if (!valid) {
                    status.textContent = 'Форма содержит ошибки.';
                    return;
                }

                status.textContent = 'Спасибо! Ваше сообщение отправлено.';
                form.reset();
            });
        })();
    </script>
</body>

</html>


